公共施設予約システム OpenREAF リリースノート

2012.8.23
OpenREAF Ver.5.5.2 をリリースします。
- システム全般
 - Smarty を Ver. 3.1.11 にアップデートした。

- 管理システム
 - お知らせの出力を RSS 形式に対応できるようにした。
 - 料金表が変更できない場合に料金表が消失するのを修正した。
 - 料金表新規登録画面のパンくずリストを修正した。
 - 料金表画面の上部に「戻る」ボタンを設置した。

- 利用者画面
 - RSS 形式でお知らせを出力できるようにした。


2012.7.20
OpenREAF Ver.5.5.1 をリリースします。
- システム全般
 - Smarty の foreach 文を Ver. 3.1.x 対応にした。

- 管理システム
 - 職員を削除できないバグを修正した。
 - 付属室場を利用者画面で公開／非公開を選択できるようにした。

- 利用者画面
 - 申込状況照会画面のソート指定方法を変更した。
 - 週間の申込制限において日曜始まりか月曜始まりかを定義可能にした。
 - 申込開始日時、申込締切日時の表示で0:00と23:59の場合は表示しないようにした。

- クラスファイル
 - smtp.class.php での Cc, Bcc に対するガード処理を追加した。


2012.6.6
OpenREAF Ver.5.5.0 をリリースします。
- システム全般
 - Smarty を Ver. 3.1.8 にアップデートした。
 - require_once が無用なところを require に変更した。

- 管理システム
 - 職員を削除できないバグを修正した。
 - 割増料金機能を追加した。
 - オプション料金収納機能を追加した。
 - 減免の適用対象を細分化した。
 - 附属室場の減免適用を主室場の減免適用から独立させた。
 - 定期休館設定時に休館除外日を指定できるようにした。
 - 利用者IDの文字種をシステムデータとして選択可能にした。
 - パスワードの文字種をシステムデータとして選択可能にした。
 - 不来場処理ができないバグを修正した。
 - 付属室場の対応を組合せにも適用できるようにした。
 - 利用者登録期限を使用しない機能を追加した。
 - 加算料金の設定機能を追加した。
 - 加算料金・調整額の登録画面を追加した。

- 利用者画面
 - 出力メッセージを定数化した。
 - 日付出力処理を英語表記に対応させた。
 - 利用日選択のカレンダーをページ送り方式にした。
 - 携帯電話、スマートフォンで室場選択と利用単位選択を1つの画面にした。
 - 携帯電話、スマートフォンで利用時間選択画面に日移動、週移動を付けた。
 - 携帯電話、スマートフォンの画面デザインを調整した。

- データベース構造
 - 室場減免テーブルを廃止した。
 - 利用者目的テーブルを廃止した。
 - 利用者施設テーブルを廃止した。
 - 加算料金テーブルを追加した。

- クラスファイル
 - 全ファイルを修正した。

2012.1.4
OpenREAF Ver.5.4.2 をリリースします。
- 管理システム
 - 施設を廃止／廃止取消できないバグを修正した。
 - 施設を削除できないバグを修正した。

2011.12.22
OpenREAF Ver.5.4.1 をリリースします。
- システム全般
 - 「市内」の定義定数名を _CITIZEN_ から _INSIDE_ に変更した。
 - 「市外」の表示を定義ファイル(app/define/common.php)で定義できるようにした。
 - 「市長」の表示を定義ファイル(app/define/common.php)で定義できるようにした。
 - コマ時間毎の料金設定で最低利用時間が加算されないバグを修正した。

- 管理システム
 - 施設情報登録、施設情報変更の処理を変更した。
 - 施設分類情報登録、施設分類情報変更の処理を変更した。
 - 利用単位情報登録、利用単位情報変更の処理を変更した。

- 利用者画面
 - 施設分類での申込数制限が動作しないバグを修正した。
 - 画面名称を変更した。

- クラスファイル
 - men.class.php 廃止
 - shisetsu.class.php 廃止
 - shisetsuclass.class.php 廃止

2011.11.18
OpenREAF Ver.5.4.0 をリリースします。
- システム全般
 - Smarty を Ver. 3.0.9 にアップデートした。

- 管理システム
 - 料金設定画面で不要な入力ガード処理を削除した。
 - 料金端数計算を施設毎に設定できるようにした。
 - 定期休館日設定の祝祭日処理に「休館日設定に従う」を追加した。
 - 「かな」の表示を定義ファイル(app/define/common.php)で定義できるようにした。
 - 利用者情報変更の減免設定処理のパラメータ名を修正した。
 - 「使用料等受付/使用許可」画面で予約データのみを表示する機能を追加した。
 - 施設管理権限処理の未実装部分を実装した。
 - 申込制限の設定を「予約」と「抽選」で個別に設定できるようにした。
 - 「施設」「室場」「利用単位」のかな表記入力を廃止した。
 - 職員情報変更で設定した業務権限のチェックを外すことができないバグを修正した。
 - 利用者検索のCSV出力で誕生日が正しく出力されないバグを修正した。
 - サイト閉鎖機能に閉鎖期間を設定できるオプションを追加した。
 - 公開区分を月ごとに指定できるようにした。
 - 利用単位での目的設定を廃止し、組合せで目的を設定するように変更した。
 - 予約状況検索で室場指定時に附属室場を出力できない不具合を修正した。
 - 使用料等受付／使用許可で室場指定時に附属室場を出力できない不具合を修正した。
 - 受付で収納額計算処理で現金以外の欄に入力がある場合に対応できるようにした。
 - 還付額計算方法を変更した。
 - 利用者への個別メッセージ設定機能を追加した。
 - 消費税率登録画面を追加した。

- 利用者画面
 - 予約時間割を区分で指定した場合に「時間の選択」画面で区分名を表示するようにした。
 - スマートフォン用画面のエンコーディングをUTF-8にした。
 - 「よく使う施設」での利用月の選択方法を変更した。
 - 携帯電話とスマートフォンの「よく使う施設」で利用月の選択を可能にした。
 - 「予約・抽選の申し込みと確認」を「マイページ」に変更した。
 - パスワードエラー時のアカウントロック機能を追加した。
 - 指定した閉鎖期間でサイトを閉鎖するようにした。
 - システムからの利用者個別メッセージを表示するようにした。
 - 行事予定表の表示機能を追加した。

- クラスファイル
 - 以下のファイルを修正した。
 - facility.class.php
 - facility_timetable.class.php
 - fee_base.class.php
 - privilege.class.php
 - receipt_status.class.php
 - reserve_status.class.php
 - shitsujyo.class.php
 - staff.class.php
 - system_common.class.php
 - time_schedule.class.php
 - touroku_base.class.php
 - yoyaku_touroku.class.php

- データベース構造
 - 不要なカラムを削除した。
 - インデックスの見直しをした。

2011.08.29
OpenREAF Ver.5.3.2 をリリースします。
- 利用者画面
 - 制限でのカウント処理SQL文のエラーを修正した。
 - USER AGENT での振り分け処理でタブレットの判定を追加した。

- クラスファイル
 - mbfpdf/fpdf.php
 - mbfpdf/font/makefont/makefont.php
 - mbfpdf/font/makefont/mkttfdef.php
  (PHP 5.3.x への対応)
 - confiramtion_mail.class.php
  (パラメータ名修正)

2011.07.25
OpenREAF Ver.5.3.1 をリリースします。
- 管理システム
 - デッドリンクを修正した。
 - 不来場処理で確認のダイアログボックスを出すようにした。

- 利用者画面
 - 「施設からのお知らせ」に更新日付を出すようにした。

2011.07.20
OpenREAF Ver.5.3.0 をリリースします。
- システム全般
 - PostgreSQLに対応した。
   (カラム名の小文字化に際し、ほぼ全てのファイルを修正した。)

- データベース構造
 - すべてのカラム名を小文字にした。

2011.07.20
OpenREAF Ver.5.2.0 をリリースします。
- システム全般
 - Smarty を Ver. 3.0.8 にアップデートした。
 - 不要なカラムに対する処理をを削除した。

- 管理システム
 - 室場一覧を施設一覧に統合した。
 - 施設登録・変更時の必須項目に対して任意チェックになっていたのを修正した。

- 利用者画面
 - 予約情報のリスト表示でのソート順を予約番号から施設ごとに変更した。
 - 携帯向け画面を3G機種対応にした。
 - スマートフォン向け画面を追加した。

- クラスファイル
 - 機能追加・修正に伴い以下のファイル修正した。
   - Action.class.php
   - DB.class.php
   - confirmation_mail.class.php
   - facility_fee.class.php
   - facility_timetable.class.php
   - fee_calc.class.php
   - privilege.class.php
   - shisetsu.class.php
   - shitsujyo.class.php
   - smtp.class.php
   - system_common.class.php
   - time_schedule.class.php
   - touroku_base.class.php
   - yoyaku_touroku.class.php

- データベース構造
 - 不要なカラムを削除した。
 - PostgreSQLでの動作に合わせ、カラムのデータ型を一部変更した。

2011.04.12
OpenREAF Ver.5.1.0 をリリースします。
- システム全般
 - Smarty 3.x をバンドルした。
 - キットのディレクトリ構造を変更した。
 - fpdf のクラス定義を PHP5 に合わせた。

- 管理システム
 - 料金設定を利用単位の組合せごとに設定できるようにした。
   (利用単位ごとの利用金設定は廃止)
 - キャンセル料を処理できるようにした。
 - 予約情報のリスト表示でのソート順を予約番号から施設ごとに変更した。
 - XMLHttpRequest での転送データを XML 形式にした。
 - 金種コードをDB設定から配列設定に変更した。(include/common.php)

- 利用者画面
 - メールテンプレートを Smarty から PHP ファイルの共通関数にした。
 - 支払期限のメッセージが出力されないバグを修正した。

- クラスファイル
 - 機能追加・修正に伴い以下のファイル修正した。
   - Action.class.php
   - Smarty.class.php
   - confirmation_mail.class.php
   - facility.class.php
   - facility_fee.class.php
   - fee_calc.class.php
   - log.class.php
   - privilege.class.php
   - receipt_status.class.php
   - reserve_status.class.php
   - smtp.class.php
   - system_common.class.php
   - touroku_base.class.php
   - yoyaku_touroku.class.php
   - mbfpdf/fpdf.php
   - mbfpdf/mbfpdf.php

- データベース構造
 - 全てのテーブルを InnoDB にした。
 - 人数データを1テーブルに集約した。
 - 調整額と調整理由を1テーブルに集約した。

2011.01.24
OpenREAF Ver.5.0.4 をリリースします。
- 管理システム
 - 料金表を更新した時に他の料金表が消えるバグを修正した。

2011.01.07
OpenREAF Ver.5.0.3 をリリースします。
- 管理システム
 - 閉庁日・祝祭日登録で日付チェックを追加した。
 - 本日分予約画面での初期化処理を変更した。
 - 施設分類削除画面の出力メッセージを修正した。
 - 予約情報入力画面での利用停止・登録抹消者に対する制限のバグを修正した。
 - 予約状況検索画面での予約番号指定時に他の条件を拾わないようにした。
 - 充当受付画面で充当額が0円の場合はエラーメッセージを出すようにした。
 - 使用料等受付/使用許画面での予約状況表示を修正した。
 - 未登録者の予約は充当できないようにした。
 - 予約情報入力画面で料金区分か減免を変更し再計算ボタンを押さずに
   予約申込ボタンを押した時に確認メッセージを出すようにした。
 - 還付額計算のバグを修正した。

- 利用者画面
 - 利用停止・登録抹消者に対する制限のバグを修正した。
 - 施設のご案内画面でのリンククリックで別画面が立ち上がるようにした。
 - 施設のお知らせ画面でのリンククリックで別画面が立ち上がるようにした。

- クラスファイル
 - 料金計算処理を見直し変更した。
 - 以下のファイルのPHP閉じタグのごみを削除した。
   - system_common.class.php
   - facility.class.php
   - shisetsu.class.php
   - shitsujyo.class.php
   - facility_fee.class.php
   - facility_timetable.class.php
   - men.class.php
   - shisetsuclass.class.php
 - 収納状況取得処理を見直し変更した。

- データベース構造
 - パスワード自動発番フラグの初期値を追加した。

2010.12.08
OpenREAF Ver.5.0.2 をリリースします。
- 管理システム
 - 利用者を削除できないバグを修正した。
 - 定数 _IDLE_TIMEOUT_ が効かないバグを修正した。
 - 以下の画面のHTMLタグずれを修正した。
   - ICカード用ログイン画面
   - 室場基本情報登録画面
   - 室場基本情報変更画面
   - 利用単位登録画面
 
- 利用者画面
 - 以下の画面のHTMLタグずれを修正した。
   - 施設分類選択
   - 施設選択
   - 室場選択
   - 利用単位選択
   - 目的選択

2010.11.17
OpenREAF Ver.5.0.1 をリリースします。
- 管理システム
 - 職員廃止画面が真っ白になるバグを修正した。
 - 閉庁日・祝祭日登録画面を機能強化した。

- 利用者画面
 - 付属室場選択画面が真っ白になるバグを修正した。
 - 以下の画面のデザインを変更した。
   - 施設分類選択
   - 施設選択
   - 室場選択
   - 利用単位選択
   - 目的選択
   - 条件検索結果
 - ログイン画面の一つ戻るボタンのバグを修正した。

2010.11.10
OpenREAF Ver.5.0.0 をリリースします。
--
